URL reference: https://medium.com/@josielol/unleashing-the-t-rex-how-containers-sometimes-fail-to-contain-1710b6cc7990
DateReviewed: 2024-11-01
Description: Our article here is going to touch on how containers sometimes fail to contain - and they start with an analogy to Jurrasic Park, and how the dinos were not contained. We dive in starting with container basics, going though how it's a single bundle running on an OS, which is mostly isolated. They point out that at a low level, a container is just a child on the host system. We get a neat diagram illustrating containers/namespaces and the Linux features that help out. The container runtime are the gates, allowing containers to start, do things, and stop. But they say, gates sometimes fail. We get another diagram, with arrows and a label of container escapes, so let's see what we're going to delve into. They talke about permission issues with mounts, allowing unintended file access; or a buffer overflow, allowing access to shared memory. Misconfigs can even allow CLI commands on the host from the container, and lastly, priv escalation that results in root access, allowing the attacker carte blanche. Next up they are going to do a demo with eBPF. They say that clever code can get around the verifier and JIT compiler, allowing execution of unsafe bytecode. They go into a bit of detail on how the verifier works, ensuring there are no unreachable instructions and simulating each control branch. They point to a few actual instances of CVEs involving the verifier, and are going to focus on a recent one. The walkthrough is quite simple - we build a user container, include the nasty code in the image, then run the binary and are root when done. Pretty cool. They go into mitigations with supply chains and SBOMs, but basically you have to be vigilant. Excellent article.
BottomLine: Awesome article showing a straightforward container escape in Kubernetes
==
